### 날짜와 시간

- 날짜: 2023-10-20
- 시간: 18:22

### 주제 또는 키워드
[[Refactoring]]
[[Refactoring Basic]]
- 함수 추출하기

### 간단한 내용
- 반대 리팩터링: [[함수 인라인하기]]
- 언제 독립된 함수로 묶어야 할지는 의견(중복, 코드 길이 등)이 많지만 목적과 구현의 분리가 가장 합리적이라 생각
- 코드를 보고 무슨일을 하는지 파악하기 힘들다면 함수로 추출한뒤 무슨일에 걸맞는 이름을 짓는다
- 함수가 많아져서 성능 걱정은 하지말것, 요즘 인프라 좋아저서 괜찮음
- 대신 이름을 잘짓자
- 함수 추출 절차
	1. 함수를 새로 만들고 목적을 잘 드러내는 이름을 붙인다(어떻게가 아닌 무엇을 하는지가 드러나야한다).
		1. 만약 적당한 이름이 떠오르지 않는다면 추출하면 안된다는 신호일수있다
		2. 일단 추출해보고 효과가 크지않으면 원래 상태로 복구해도 된다
		3. 중첩함수가 지원한다면 중첩시키자
	2. 추출한 코드를 원본 함수에서 복사하여 새함수에 붙여 넣기
	3. 추출한 코드 중 원본 함수의 지역 변수를 참조하거나 추출한 함수의 유호범위를 벗어나는 변수는 없는지 검사한다. 있다면 매개변수로 전달한다
		1. 중첩함수로 추출할때는 크게 문제없다
		2. 추출한 코드에서만 사용하는 변수가 있다면 추출한 함수 안에서 선언한다
		3. 추출한 코드에서 값을 수정하는 지역 변수가 너무 많다면 함수추출 대신 [[변수 쪼개기]],[[임시 변수를 질의 함수로 바꾸기]]같은 리팩토링을 한다, 그후 다시 시도
	4. 추출이 끝난후 컴파일
	5. 원본 함수에서 추출한 코드 부분을 새로 만든 함수를 호출하는 문장으로 바꾼다
	6. 테스트
	7. 다른 코드에서 방금 추출한 것과 똑같거나 비슷한 코드가 없는지 살핀후 있다면 추출한 새함수로 바꿀지 검토
- 값을 반환할 변수가 여러 개라면?
	- 값들을 레코드로 묶어서 반환해도 좋지만 여러 함수로 쪼개서 하나씩 반환하게 하는게 좋음
### 코드 스니펫 (선택)

```javascript
function printOwing(invoice) {
	printBanner();
	let outstanding = calculateOutstanding();
	
	//세부 사항 출력
	consolo.log(`고객명: ${invoice.customer}`);
	consolo.log(`채무액: ${outstanding}`);
}
```
=>
``` javascript
function printOwing(invoice) {
	printBanner();
	let outstanding = calculateOutstanding();
	printDetails(outstanding)
	
	function printDetail(outstaning) {
		consolo.log(`고객명: ${invoice.customer}`);
		consolo.log(`채무액: ${outstanding}`);
	}
}
```